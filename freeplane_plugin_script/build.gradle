dependencies {
    compile project(':freeplane')
    // TODO: this is most probably out of date. keep the latest version in git!
    // (from libjsyntaxpane-java Debian package!)
    compile group: 'de.sciss', name: 'jsyntaxpane', version:'1.0.0'
    compile group: 'org.codehaus.groovy', name: 'groovy', version:'2.3.1'
}

// TODO: in order to activate this, we need a versioned project dependency in freeplane_plugin_formular!
//version = '1.0.1'

jar {
    manifest {
        name = pluginid
        symbolicName = pluginid

        ext.deps = configurations.runtime.files.collect { "lib/${it.name}" }
        ext.deps.add(0, "lib/plugin-" + project.version + '.jar')

        attributes 'Class-Path': ext.deps.join(', ')
        instruction 'Bundle-Vendor', 'Freeplane Project'
        instruction 'Bundle-Activator', pluginid + ".Activator"
        instruction 'Bundle-RequiredExecutionEnvironment', 'JavaSE-1.6'

        instruction 'Import-Package', 'org.osgi.framework;version="1.3.0", org.freeplane.core.*, org.freeplane.features.*, org.freeplane.main.*, org.freeplane.n3.*, org.freeplane.view.*'

        instruction 'Export-Package', 'jsyntaxpane, jsyntaxpane.actions, jsyntaxpane.actions.gui, jsyntaxpane.components, jsyntaxpane.lexers, jsyntaxpane.syntaxkits, jsyntaxpane.util, org.freeplane.plugin.script;-noimport:=true'
        
        // Require-Bundle is ignored by bnd => replaced by Import-Package!
        //instruction 'Require-Bundle', 'org.freeplane.core;bundle-version="1.0.1"'
    }
}
